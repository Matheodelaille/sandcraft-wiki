<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create - Sandcraft Wiki</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #1a1a1a url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" opacity="0.05"><rect fill="%23333" width="100" height="100"/></svg>');
            font-family: 'Minecraft', monospace; 
            color: #fff; 
            line-height: 1.6;
        }
        .header {
            background: linear-gradient(135deg, #2a5c2a 0%, #3a7a3a 100%);
            border-bottom: 4px solid #5a3c2a;
            padding: 1rem 2rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .logo { font-size: 2rem; font-weight: bold; color: #ffd700; text-shadow: 3px 3px 0 #000; }
        .back-btn { background: #4a4a4a; border: 2px solid #8b8b8b; border-radius: 4px; padding: 0.5rem 1rem; color: #fff; text-decoration: none; }
        .main-content { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="new-index.html" class="logo">üß± Sandcraft Wiki</a>
            <a href="new-index.html" class="back-btn">‚Üê Retour √† l'accueil</a>
        </div>
    </header>

    <main class="main-content">
        <!-- En-t√™te du mod -->
        <div class="mod-header" style="text-align: center; margin-bottom: 3rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">‚öôÔ∏è</div>
            <h1 style="font-size: 3rem; color: #ffd700; text-shadow: 3px 3px 0 #000;">Create</h1>
            <p style="font-size: 1.2rem; color: #ccc; max-width: 600px; margin: 0 auto;">
                Syst√®me de m√©canismes et automatisation avec engrenages, courroies et moteurs
            </p>
        </div>

        <!-- Statistiques -->
        <div class="stats-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin: 2rem 0;">
            <div class="stat-card" style="background: #2a2a2a; border: 2px solid #5a5a5a; border-radius: 8px; padding: 1.5rem; text-align: center;">
                <div class="stat-number" style="font-size: 2rem; color: #4CAF50; font-weight: bold;" id="create-recipes">0</div>
                <div>Recettes</div>
            </div>
            <div class="stat-card" style="background: #2a2a2a; border: 2px solid #5a5a5a; border-radius: 8px; padding: 1.5rem; text-align: center;">
                <div class="stat-number" style="font-size: 2rem; color: #4CAF50; font-weight: bold;" id="create-items">0</div>
                <div>Items & Blocs</div>
            </div>
            <div class="stat-card" style="background: #2a2a2a; border: 2px solid #5a5a5a; border-radius: 8px; padding: 1.5rem; text-align: center;">
                <div class="stat-number" style="font-size: 2rem; color: #4CAF50; font-weight: bold;" id="create-machines">0</div>
                <div>Machines</div>
            </div>
        </div>

        <!-- Navigation des sections -->
        <nav class="section-nav" style="display: flex; gap: 0.5rem; margin: 2rem 0; flex-wrap: wrap;">
            <button class="section-btn active" data-section="blocks">üß± Blocs</button>
            <button class="section-btn" data-section="items">üéØ Items</button>
            <button class="section-btn" data-section="machines">‚öôÔ∏è Machines</button>
            <button class="section-btn" data-section="tools">üõ†Ô∏è Outils</button>
            <button class="section-btn" data-section="all">üì¶ Tous les Crafts</button>
        </nav>

        <!-- Conteneur des crafts -->
        <div id="crafts-container" class="crafts-grid">
            <!-- Les crafts seront charg√©s ici -->
        </div>
    </main>

    <!-- SUITE DANS LA PARTIE 2... -->
   <style>
    /* STYLES DES SECTIONS */
    .section-btn {
        background: #4a4a4a;
        border: 2px solid #8b8b8b;
        border-radius: 4px;
        padding: 0.7rem 1.2rem;
        color: #fff;
        cursor: pointer;
        font-family: inherit;
        font-weight: bold;
        transition: all 0.2s;
    }

    .section-btn.active,
    .section-btn:hover {
        background: #5a5a5a;
        border-color: #ffd700;
    }

    /* GRILLE DES CRAFTS */
    .crafts-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 2rem;
        margin-top: 2rem;
    }

    .craft-card {
        background: linear-gradient(145deg, #2a2a2a, #3a3a3a);
        border: 3px solid #8b8b8b;
        border-radius: 8px;
        padding: 1.5rem;
        transition: all 0.3s ease;
    }

    .craft-card:hover {
        border-color: #ffd700;
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(255, 215, 0, 0.2);
    }

    .craft-title {
        font-size: 1.3rem;
        color: #ffd700;
        margin-bottom: 1rem;
        border-bottom: 2px solid #5a3c2a;
        padding-bottom: 0.5rem;
    }

    /* GRILLE DE CRAFT MINECRAFT */
    .crafting-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 4px;
        width: 150px;
        height: 150px;
        background: #8B8B8B;
        border: 3px solid #5A5A5A;
        border-radius: 4px;
        padding: 6px;
        margin: 1rem auto;
        position: relative;
    }

    .crafting-slot {
        background: #C6C6C6;
        border: 2px solid #8B8B8B;
        border-radius: 2px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        position: relative;
        overflow: hidden;
    }

    .crafting-slot.filled {
        background: #E8E8E8;
        border-color: #A0A0A0;
    }

    .item-symbol {
        font-size: 1.2rem;
        filter: drop-shadow(1px 1px 1px rgba(0,0,0,0.5));
    }

    .craft-arrow {
        position: absolute;
        right: -40px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 2rem;
        color: #ffd700;
    }

    .result-slot {
        position: absolute;
        right: -80px;
        top: 50%;
        transform: translateY(-50%);
        width: 50px;
        height: 50px;
        background: #C6C6C6;
        border: 3px solid #8B8B8B;
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
    }

    .craft-visual {
        display: flex;
        justify-content: center;
        align-items: center;
        margin: 1rem 0;
        position: relative;
    }

    /* INFORMATIONS DU CRAFT */
    .craft-info {
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid #5a5a5a;
    }

    .craft-type {
        display: inline-block;
        background: #5a3c2a;
        color: #ffd700;
        padding: 0.2rem 0.6rem;
        border-radius: 3px;
        font-size: 0.8rem;
        margin-bottom: 0.5rem;
    }

    .craft-ingredients {
        font-size: 0.9rem;
        color: #ccc;
        line-height: 1.4;
    }

    /* LOADING ET ERREURS */
    .loading {
        text-align: center;
        padding: 3rem;
        font-size: 1.2rem;
        color: #aaa;
        grid-column: 1 / -1;
    }

    .error {
        text-align: center;
        padding: 2rem;
        color: #ff6b6b;
        grid-column: 1 / -1;
    }

    .no-crafts {
        text-align: center;
        padding: 3rem;
        color: #aaa;
        font-style: italic;
        grid-column: 1 / -1;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
        .crafts-grid {
            grid-template-columns: 1fr;
        }
        
        .craft-visual {
            transform: scale(0.8);
        }
        
        .section-nav {
            justify-content: center;
        }
    }

    @media (max-width: 480px) {
        .craft-visual {
            transform: scale(0.7);
        }
        
        .section-btn {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }
    }
</style>

<!-- SCRIPT DE CHARGEMENT -->
<script>
// CONFIGURATION CREATE
const CREATE_MOD_ID = 'create-1.19.2-0.5.1.f';
const CREATE_NAMESPACE = 'create:';

// CAT√âGORIES CREATE
const createCategories = {
    blocks: ['shaft', 'cogwheel', 'large', 'gear', 'frame', 'bearing', 'piston', 'pulley'],
    items: ['wand', 'goggles', 'blueprint', 'schematic', 'filter', 'module'],
    machines: ['millstone', 'mixer', 'press', 'saw', 'depot', 'basin'],
    tools: ['wrench', 'extendo_grip', 'potato_cannon', 'handheld_worldshaper']
};

// SYMBOLES POUR LES ITEMS
const itemSymbols = {
    // Mat√©riaux de base
    'andesite': '‚¨ú', 'zinc': 'üü®', 'brass': 'üü°', 'copper': 'üüß',
    'iron': '‚öôÔ∏è', 'gold': 'üü®', 'redstone': 'üî¥', 'wood': 'ü™µ',
    
    // Composants Create
    'shaft': 'üìè', 'cogwheel': '‚öôÔ∏è', 'gear': '‚≠ï', 'belt': '‚û∞',
    'piston': 'üî®', 'engine': 'üî•', 'millstone': '‚≠ï', 'mixer': 'üîÑ',
    
    // Items divers
    'wand': '‚ú®', 'goggles': 'üëì', 'blueprint': 'üìã', 'wrench': 'üîß'
};

// VARIABLES GLOBALES
let createData = {
    recipes: {},
    items: {}
};

// CHARGEMENT DES DONN√âES
// Remplacer la fonction loadCreateData()
async function loadCreateData() {
    try {
        showLoading('Chargement des donn√©es Create...');
        
        const response = await fetch('./data/complete-data.json');
        const allData = await response.json();
        
        console.log('üîç Debug - Tous les recipes:', Object.keys(allData.recipes).length);
        
        // Debug: voir ce qui est trouv√© pour Create
        const createRecipes = Object.entries(allData.recipes)
            .filter(([key]) => key.includes('create:'));
        
        console.log('üîç Recipes Create trouv√©s:', createRecipes.length);
        console.log('üîç Exemples:', createRecipes.slice(0, 5));
        
        createData.recipes = createRecipes.reduce((obj, [key, val]) => { 
            obj[key] = val; 
            return obj; 
        }, {});
            
        // M√™me chose pour les items
        const createItems = Object.entries(allData.items)
            .filter(([key]) => key.includes('create:'));
        
        console.log('üîç Items Create trouv√©s:', createItems.length);
        createData.items = createItems.reduce((obj, [key, val]) => { 
            obj[key] = val; 
            return obj; 
        }, {});
        
        updateStats();
        displayCrafts('blocks');
        setupEventListeners();
        
    } catch (error) {
        console.error('‚ùå Erreur chargement Create:', error);
        showError('Impossible de charger les donn√©es Create');
    }
}

// METTRE √Ä JOUR LES STATISTIQUES
function updateStats() {
    document.getElementById('create-recipes').textContent = Object.keys(createData.recipes).length;
    document.getElementById('create-items').textContent = Object.keys(createData.items).length;
    
    // Compter les machines (recettes avec certains types)
    const machines = Object.values(createData.recipes).filter(recipe => 
        recipe.type && recipe.type.includes('mechanical')
    ).length;
    document.getElementById('create-machines').textContent = machines;
}

// SUITE DANS LA PARTIE 3...
<script>
// AFFICHER LES CRAFTS PAR CAT√âGORIE
function displayCrafts(category) {
    const container = document.getElementById('crafts-container');
    
    if (!createData.recipes || Object.keys(createData.recipes).length === 0) {
        container.innerHTML = '<div class="loading">Chargement des crafts...</div>';
        return;
    }

    let filteredRecipes = Object.entries(createData.recipes);
    
    // Filtrer par cat√©gorie
    if (category !== 'all') {
        const categoryKeywords = createCategories[category] || [];
        filteredRecipes = filteredRecipes.filter(([recipeId, recipe]) => {
            return categoryKeywords.some(keyword => recipeId.includes(keyword));
        });
    }

    if (filteredRecipes.length === 0) {
        container.innerHTML = '<div class="no-crafts">Aucun craft trouv√© dans cette cat√©gorie</div>';
        return;
    }

    // Trier les crafts par nom
    filteredRecipes.sort(([idA], [idB]) => idA.localeCompare(idB));

    container.innerHTML = filteredRecipes.map(([recipeId, recipe]) => 
        generateCraftCard(recipeId, recipe)
    ).join('');
}

// G√âN√âRER UNE CARTE DE CRAFT
function generateCraftCard(recipeId, recipe) {
    const itemName = getItemNameFromRecipe(recipeId);
    const craftVisual = generateCraftVisual(recipe);
    const ingredientsList = generateIngredientsList(recipe);
    
    return `
        <div class="craft-card">
            <div class="craft-title">${formatItemName(itemName)}</div>
            <div class="craft-visual">
                ${craftVisual}
            </div>
            <div class="craft-info">
                <div class="craft-type">${getRecipeType(recipe.type)}</div>
                <div class="craft-ingredients">
                    ${ingredientsList}
                </div>
            </div>
        </div>
    `;
}

// G√âN√âRER LA VISUALISATION DU CRAFT
function generateCraftVisual(recipe) {
    if (recipe.type === 'minecraft:crafting_shaped' && recipe.pattern) {
        return generateShapedCraft(recipe);
    } else if (recipe.type === 'minecraft:crafting_shapeless' && recipe.ingredients) {
        return generateShapelessCraft(recipe);
    } else {
        return generateSimpleCraft(recipe);
    }
}

// CRAFT EN GRILLE (SHAPED)
function generateShapedCraft(recipe) {
    const pattern = recipe.pattern || [];
    const key = recipe.key || {};
    
    let gridHTML = '<div class="crafting-grid">';
    
    // Cr√©er une grille 3x3
    for (let row = 0; row < 3; row++) {
        for (let col = 0; col < 3; col++) {
            const patternRow = pattern[row];
            const char = patternRow && patternRow[col];
            const ingredient = char && key[char];
            
            const slotClass = ingredient ? 'crafting-slot filled' : 'crafting-slot';
            const symbol = ingredient ? getItemSymbol(ingredient) : '';
            
            gridHTML += `<div class="${slotClass}">${symbol}</div>`;
        }
    }
    
    gridHTML += `
        <div class="craft-arrow">‚Üí</div>
        <div class="result-slot">${getItemSymbol(recipe.result)}</div>
    </div>`;
    
    return gridHTML;
}

// CRAFT SANS FORME (SHAPELESS)
function generateShapelessCraft(recipe) {
    const ingredients = recipe.ingredients || [];
    const result = recipe.result;
    
    let html = '<div style="text-align: center; padding: 1rem;">';
    html += '<div style="display: flex; justify-content: center; align-items: center; gap: 0.5rem; margin-bottom: 1rem; flex-wrap: wrap;">';
    
    ingredients.forEach(ingredient => {
        html += `<div style="width: 40px; height: 40px; background: #C6C6C6; border: 2px solid #8B8B8B; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem;">${getItemSymbol(ingredient)}</div>`;
    });
    
    html += `<div style="margin: 0 1rem; font-size: 1.5rem; color: #ffd700;">+</div>`;
    html += `</div>`;
    html += `<div style="font-size: 1.5rem; color: #ffd700;">‚Üì</div>`;
    html += `<div style="width: 50px; height: 50px; background: #C6C6C6; border: 3px solid #8B8B8B; border-radius: 4px; display: inline-flex; align-items: center; justify-content: center; font-size: 1.5rem; margin-top: 0.5rem;">${getItemSymbol(result)}</div>`;
    html += '</div>';
    
    return html;
}

// CRAFT SIMPLE (FALLBACK)
function generateSimpleCraft(recipe) {
    return `
        <div style="text-align: center; padding: 1rem;">
            <div style="font-size: 3rem; margin-bottom: 0.5rem;">‚öôÔ∏è</div>
            <div style="color: #ccc; font-size: 0.9rem;">Craft ${getRecipeType(recipe.type)}</div>
            <div style="margin-top: 0.5rem; color: #ffd700;">‚Üí ${getItemSymbol(recipe.result)}</div>
        </div>
    `;
}

// FONCTIONS UTILITAIRES
function getItemSymbol(ingredient) {
    if (!ingredient) return '‚ùì';
    
    let itemId = '';
    
    if (typeof ingredient === 'string') {
        itemId = ingredient;
    } else if (ingredient.item) {
        itemId = ingredient.item;
    } else if (ingredient.tag) {
        itemId = ingredient.tag;
    }
    
    // Chercher un symbole correspondant
    for (const [key, symbol] of Object.entries(itemSymbols)) {
        if (itemId.toLowerCase().includes(key)) {
            return symbol;
        }
    }
    
    return 'üì¶';
}

function getItemNameFromRecipe(recipeId) {
    return recipeId.replace(CREATE_NAMESPACE, '').replace(/[_-]/g, ' ');
}

function formatItemName(name) {
    return name.replace(/\b\w/g, l => l.toUpperCase());
}

function getRecipeType(type) {
    const types = {
        'minecraft:crafting_shaped': 'Craft en Grille',
        'minecraft:crafting_shapeless': 'Craft Sans Forme',
        'create:mechanical_crafting': 'Craft M√©canique',
        'create:cutting': 'D√©coupe',
        'create:milling': 'Broyage',
        'create:crushing': 'Concassage',
        'create:pressing': 'Pressage'
    };
    return types[type] || type || 'Craft';
}

function generateIngredientsList(recipe) {
    if (recipe.type === 'minecraft:crafting_shaped' && recipe.key) {
        return Object.entries(recipe.key)
            .map(([key, ingredient]) => {
                const symbol = getItemSymbol(ingredient);
                return `${symbol} ${formatIngredient(ingredient)}`;
            })
            .join('<br>');
    } else if (recipe.ingredients) {
        return recipe.ingredients
            .map(ingredient => `${getItemSymbol(ingredient)} ${formatIngredient(ingredient)}`)
            .join('<br>');
    }
    return 'Ingr√©dients non sp√©cifi√©s';
}

function formatIngredient(ingredient) {
    if (typeof ingredient === 'string') {
        return ingredient.replace(/.*:/, '').replace(/[_-]/g, ' ');
    } else if (ingredient.item) {
        return ingredient.item.replace(/.*:/, '').replace(/[_-]/g, ' ');
    } else if (ingredient.tag) {
        return `Tag: ${ingredient.tag.replace(/.*:/, '').replace(/[_-]/g, ' ')}`;
    }
    return '?';
}

// GESTION DES √âV√âNEMENTS
function setupEventListeners() {
    // Navigation par sections
    document.querySelectorAll('.section-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            document.querySelectorAll('.section-btn').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
            displayCrafts(e.target.dataset.section);
        });
    });
}

// FONCTIONS D'AFFICHAGE
function showLoading(message = 'Chargement...') {
    const container = document.getElementById('crafts-container');
    container.innerHTML = `<div class="loading">${message}</div>`;
}

function showError(message) {
    const container = document.getElementById('crafts-container');
    container.innerHTML = `<div class="error">‚ùå ${message}</div>`;
}

// D√âMARRAGE
document.addEventListener('DOMContentLoaded', function() {
    console.log('üöÄ Page Create - Initialisation...');
    loadCreateData();
});

// FONCTIONS DE D√âBUGAGE
window.createUtils = {
    getData: () => createData,
    getRecipes: () => Object.keys(createData.recipes),
    getItems: () => Object.keys(createData.items)
};
</script>

<!-- STYLE FINAL -->
<style>
    .craft-card:hover .crafting-grid {
        border-color: #ffd700;
    }
    
    .craft-card:hover .result-slot {
        border-color: #ffd700;
        background: #E8E8E8;
    }
    
    /* Animation subtile au survol */
    .crafting-slot.filled:hover {
        transform: scale(1.1);
        transition: transform 0.2s ease;
    }
</style>

</body>
</html>    
